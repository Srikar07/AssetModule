<div class="card card-custom gutter-b">
    <div class="card-header">
        <div class="card-title">
            <h3 class="card-label">Create A New Deal</h3>
        </div>
    </div>
    <div class="card-body">
        <!--begin: Wizard -->
        <div #wizard
             class="wizard wizard-2"
             id="kt_wizard_v2"
             data-wizard-state="step-first">
            <div class="wizard-nav border-right py-8 px-8 py-lg-20 px-lg-10">
                <!--begin: Form Wizard Nav -->
                <div class="wizard-steps">
                    <a class="wizard-step"
                       href="javascript:;"
                       data-wizard-type="step"
                       data-wizard-state="current">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/General/User.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Basic Information</div>
                                <div class="wizard-desc">Setup Basic Deal Information</div>
                            </div>
                        </div>
                    </a>
                    <a class="wizard-step" href="javascript:;" data-wizard-type="step">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/Map/Compass.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Additional Information</div>
                                <div class="wizard-desc">Enter Additional Information</div>
                            </div>
                        </div>
                    </a>
                    <a class="wizard-step" href="javascript:;" data-wizard-type="step">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/Map/Position.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Properties</div>
                                <div class="wizard-desc">Address, Street, City, State</div>
                            </div>
                        </div>
                    </a>
                    <a class="wizard-step" href="javascript:;" data-wizard-type="step">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/General/Thunder-move.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Documents</div>
                                <div class="wizard-desc">Upload Documents</div>
                            </div>
                        </div>
                    </a>
                    <!--<a class="wizard-step" href="javascript:;" data-wizard-type="step">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/Shopping/Credit-card.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Review</div>
                                <div class="wizard-desc">Review Entered Information</div>
                            </div>
                        </div>
                    </a>-->
                    <a class="wizard-step" href="javascript:;" data-wizard-type="step">
                        <div class="wizard-wrapper">
                            <div class="wizard-icon">
                                <span class="svg-icon svg-icon-3x"
                                      [inlineSVG]="'./assets/media/svg/icons/General/Like.svg'"></span>
                            </div>
                            <div class="wizard-label">
                                <div class="wizard-title">Completed!</div>
                                <div class="wizard-desc">Review and Submit</div>
                            </div>
                        </div>
                    </a>
                </div>
                <!--end: Form Wizard Nav -->
            </div>
            <div class="wizard-body py-8 px-8 py-lg-20 px-lg-10">
                <!--begin: Wizard Form-->

                <div class="row">
                    <div class="offset-xxl-2 col-xxl-8 offset-md-2 col-md-8">
                        <!--begin: Form Wizard Form-->
                        <form [formGroup]="basicInfoForm" class="form" id="kt_form">
                            <!--begin: Form Wizard Step 1-->
                            <div class="pb-5"
                                 data-wizard-type="step-content"
                                 data-wizard-state="current">
                                <h4 class="mb-10 font-weight-bold text-dark">
                                    Enter Basic Information
                                </h4>
                                <div class="kt-form__section kt-form__section--first">
                                    <div class="kt-wizard-v2__form">
                                        <!--<div class="form-group">
                                            <app-google-auto-complete (setAddress)="getAddress($event)" adressType="geocode"></app-google-auto-complete>
                                        </div>-->
                                        <div class="form-group">
                                            <label>Deal Type:</label>
                                            <select name="dealType"
                                                    formControlName="dealType"
                                                    [(ngModel)]="newDealInfo.dealType"
                                                    class="form-control"
                                                    [ngClass]="{ 'is-invalid': basicInfoDealTypeval.errors }"
                                                    (change)="changeDealType($event)">
                                                <option value="0" disabled>Choose Deal Type</option>
                                                <option *ngFor="let dealType of drpDealTypes" [value]="dealType.name">{{dealType.name}}</option>
                                            </select>
                                            <div *ngIf="basicInfoDealTypeval.errors" class="invalid-feedback">
                                                <div *ngIf="basicInfoDealTypeval.errors?.required">
                                                    Please enter valid Deal Type
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label>Deal Name</label>
                                            <input type="text"
                                                   formControlName="name"
                                                   class="form-control"
                                                   name="name"
                                                   [(ngModel)]="newDealInfo.name"
                                                   placeholder=""
                                                   value=""
                                                   [ngClass]="{ 'is-invalid': basicInfoFormval.name.errors }" />
                                            <div *ngIf="basicInfoFormval.name.errors" class="invalid-feedback">
                                                <div *ngIf="basicInfoFormval.name.errors.required">
                                                    Please enter valid Deal Name
                                                </div>
                                            </div>
                                        </div>
                                        <!--<div class="row">
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label>Ownership</label>
                                                    <select name="ownership"
                                                            [(ngModel)]="newDealInfo.ownership"
                                                            class="form-control">
                                                        <option value="" selected disabled>Choose the Ownership</option>
                                                        <option *ngFor="let owner of drpOwnership" [value]="owner.id">{{owner.name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xl-6">
                                                <div class="form-group">
                                                    <label>Asset Manager</label>
                                                    <mat-form-field class="example-full-width">
                                                        <input type="text" placeholder="Name" aria-label="Name" matInput [formControl]="myControl" [matAutocomplete]="auto"
                                                               autocomplete="off">
                                                        <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                                                            <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
                                                                {{ option.name }}
                                                            </mat-option>
                                                        </mat-autocomplete>
                                                    </mat-form-field>

                                                    <span class="form-text text-muted">Please select asset Manager.</span>
                                                </div>
                                            </div>

                                        </div>-->
                                    </div>
                                </div>
                            </div>
                            <!--end: Form Wizard Step 1-->
                            <!--begin: Form Wizard Step 2-->
                            <div class="pb-5" data-wizard-type="step-content">
                                <h4 class="mb-10 font-weight-bold text-dark">
                                    Additional Information
                                </h4>
                                <div class="row">
                                    <!--<div class="col-xl-6">
                                        <div class="form-group">
                                            <label>Property Manager</label>
                                            <input [ngModelOptions]="{standalone: true}" type="text"
                                                   class="form-control"
                                                   name="propertyManager"
                                                   placeholder="Enter Asset Manager"
                                                   [(ngModel)]="newDealInfo.propertyManager"
                                                   value="" />
                                            <span class="form-text text-muted">Please enter Property Manager.</span>
                                        </div>
                                    </div>-->
                                    <div class="col-xl-12">
                                        <div class="form-group">
                                            <label>Investment Lead</label>
                                            <input [ngModelOptions]="{standalone: true}" type="text"
                                                   class="form-control"
                                                   name="investmentLead"
                                                   placeholder="Investment Lead"
                                                   [(ngModel)]="newDealInfo.investmentLead"
                                                   value="" />
                                            <span class="form-text text-muted">Please enter your Investment Lead.</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-12">
                                        <div class="form-group">
                                            <label>Legal - Lead</label>
                                            <input [ngModelOptions]="{standalone: true}" type="text"
                                                   class="form-control"
                                                   name="postcode"
                                                   [(ngModel)]="newDealInfo.legalLead"
                                                   placeholder="Legal Lead"
                                                   value="newDealInfo.legalLead" />
                                            <span class="form-text text-muted">Please enter your Legal Lead.</span>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="pb-5" data-wizard-type="step-content">
                                <div class="row">
                                    <h4 class="mb-10 font-weight-bold text-dark">
                                        Enter the properties List

                                    </h4>
                                    <div class="card-toolbar">
                                        <a title="Edit Property" class="btn btn-icon btn-light btn-hover-primary btn-sm mx-3"
                                           (click)="reloadData()">
                                            <span [inlineSVG]="'./assets/plugins/keenthemes-icons/svg/017-reload.svg'" cacheSVG="true"
                                                  class="svg-icon svg-icon-md svg-icon-primary">
                                            </span>
                                        </a>
                                        <button type="button" class="btn btn-primary" (click)="create()">Add New Property</button>
                                    </div>

                                </div>
                                <!--<app-google-auto-complete (setAddress)="getAddress($event)" adressType="geocode"></app-google-auto-complete>-->
                                <div class="table-responsive angular-bootstrap-table">
                                    <table class="table table-bordered table-striped table-head-custom table-vertical-center overflow-hidden  w-auto">
                                        <thead>
                                            <tr>
                                                <th>Property Name</th>
                                                <th>Property Type</th>
                                                <th>Ownership</th>
                                                <th>Address</th>
                                                <th>Units</th>
                                                <th>Property Manager</th>
                                                <th>Asset Manager</th>
                                                <th>Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr *ngFor="let dealProperty of newDealInfo.properties; index as i" [ngClass]="{'active': dealProperty.propertyName}">
                                                <td>
                                                    {{dealProperty.propertyName}}
                                                </td>
                                                <td>
                                                    {{dealProperty.propertyType}}

                                                </td>
                                                <td>
                                                    {{dealProperty.businessUnitName}}
                                                </td>
                                                <td>
                                                    {{dealProperty.propertyAddressString}}
                                                </td>
                                                <td>
                                                    {{dealProperty.units}}
                                                </td>
                                                <td>
                                                    {{dealProperty.propertyManager}}
                                                </td>
                                                <td>
                                                    {{dealProperty.assetManager}}
                                                </td>
                                                <td>
                                                    <div class="row">
                                                        <a title="Edit Property" class="btn btn-icon btn-light btn-hover-primary btn-sm mx-3"
                                                           (click)="edit(dealProperty)">
                                                            <span [inlineSVG]="'./assets/media/svg/icons/Communication/Write.svg'" cacheSVG="true"
                                                                  class="svg-icon svg-icon-md svg-icon-primary">
                                                            </span>
                                                        </a>

                                                        <a title="Delete Property" class="btn btn-icon btn-light btn-hover-danger btn-sm"
                                                           (click)="deletePropertyRecord(dealProperty)">
                                                            <span [inlineSVG]="'./assets/media/svg/icons/General/Trash.svg'" cacheSVG="true"
                                                                  class="svg-icon svg-icon-md svg-icon-danger">
                                                            </span>
                                                        </a>
                                                    </div>
                                                </td>

                                               
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!--end: Form Wizard Step 2-->
                            <!--begin: Form Wizard Step 3-->
                            <div class="pb-5" data-wizard-type="step-content">
                                <h4 class="mb-10 font-weight-bold text-dark">
                                    Select your Services
                                </h4>
                                <div class="form-group">
                                    <ngx-dropzone (change)="onSelect($event)" [expandable]="true">
                                        <ngx-dropzone-label>Drop files</ngx-dropzone-label>
                                        <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
                                            <ngx-dropzone-label>{{ f.name }}</ngx-dropzone-label>
                                        </ngx-dropzone-preview>
                                    </ngx-dropzone>

                                    <!--<ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f">
                                        <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
                                    </ngx-dropzone-image-preview>-->
                                </div>
                            </div>
                            <!--end: Form Wizard Step 3-->
                            <!--begin: Form Wizard Step 6-->
                            <div class="pb-5" data-wizard-type="step-content">
                                <h4 class="mb-10 font-weight-bold text-dark">
                                    Review your Details and Submit
                                </h4>
                                <div class="border-bottom mb-5 pb-5">
                                    <div class="font-weight-bolder mb-3">Basic Info</div>
                                    di
                                    <div class="line-height-xl">
                                        <b>Deal Type</b>: {{newDealInfo.dealType}}<br />
                                        <b>Deal Name</b>: {{newDealInfo.name}} <br />
                                        <b>Ownership</b>: {{newDealInfo.ownership}}
                                    </div>
                                </div>
                                <div class="border-bottom mb-5 pb-5">
                                    <div class="font-weight-bolder mb-3">
                                        Attachments
                                    </div>
                                    <div class="line-height-xl">
                                        <div>
                                            <table class="table  table-striped table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">No</th>
                                                        <th scope="col">File Name</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let f of files, index as i">
                                                        <td scope="row">{{i+1}}</td>
                                                        <td>{{f.name}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <!--end: Form Wizard Step 6-->
                            <!--begin: Form Actions -->
                            <div class="d-flex justify-content-between border-top pt-10">
                                <div class="mr-2">
                                    <div class="btn btn-light-primary font-weight-bold text-uppercase px-9 py-4"
                                         data-wizard-type="action-prev">
                                        Previous
                                    </div>
                                </div>
                                <div>
                                    <div (click)="onSubmit()"
                                         class="btn btn-success font-weight-bold text-uppercase px-9 py-4"
                                         data-wizard-type="action-submit">
                                        Submit
                                    </div>
                                    <div class="btn btn-primary font-weight-bold text-uppercase px-9 py-4"
                                         data-wizard-type="action-next">
                                        Next Step
                                    </div>
                                </div>
                            </div>
                            <!--end: Form Actions -->
                        </form>
                        <!--end: Form Wizard Form-->
                    </div>
                </div>
            </div>
        </div>
        <!--end: Wizard -->
    </div>
</div>
